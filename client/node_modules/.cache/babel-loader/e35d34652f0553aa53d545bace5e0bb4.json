{"ast":null,"code":"import _regeneratorRuntime from\"/home/elson/crwn-clothing/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/home/elson/crwn-clothing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/elson/crwn-clothing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import firebase from'firebase/compat/app';import'firebase/compat/auth';// for authentication\nimport'firebase/compat/firestore';// for db\nvar config={apiKey:'AIzaSyChDIwn8oTBoWxj78QV0m4SQjVq_FlUx6o',authDomain:'crwn-clothing-db-f8235.firebaseapp.com',projectId:'crwn-clothing-db-f8235',storageBucket:'crwn-clothing-db-f8235.appspot.com',messagingSenderId:'590473202452',appId:'1:590473202452:web:fb3ac727774acf9b149001',measurementId:'G-ZN2CE5E2E7'};////////////////////////////////////////////\nfirebase.initializeApp(config);////////////////////////////////////////////\n// Save data to FireBase DB\nexport var createUserProfileDocument=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userAuth,additionalData){var userRef,snapShot,displayName,email,createdAt;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(userAuth){_context.next=2;break;}return _context.abrupt(\"return\");case 2:userRef=firestore.doc(\"persona/\".concat(userAuth.uid));_context.next=5;return userRef.get();case 5:snapShot=_context.sent;if(snapShot.exists){_context.next=17;break;}displayName=userAuth.displayName,email=userAuth.email;createdAt=new Date();_context.prev=9;_context.next=12;return userRef.set(_objectSpread({displayName:displayName,email:email,createdAt:createdAt},additionalData));case 12:_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);console.log('error creating user');case 17:return _context.abrupt(\"return\",userRef);case 18:case\"end\":return _context.stop();}}},_callee,null,[[9,14]]);}));return function createUserProfileDocument(_x,_x2){return _ref.apply(this,arguments);};}();/**\n * SIGN IN WITH GOOGLE\n */export var auth=firebase.auth();export var firestore=firebase.firestore();export var provider=new firebase.auth.GoogleAuthProvider();provider.setCustomParameters({prompt:'select_account'});export var signInWithGoogle=function signInWithGoogle(){return auth.signInWithPopup(provider);};export default firebase;","map":{"version":3,"names":["firebase","config","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","createUserProfileDocument","userAuth","additionalData","userRef","firestore","doc","uid","get","snapShot","exists","displayName","email","createdAt","Date","set","console","log","auth","provider","GoogleAuthProvider","setCustomParameters","prompt","signInWithGoogle","signInWithPopup"],"sources":["/home/elson/crwn-clothing/src/firebase/firebase.utils.js"],"sourcesContent":["import firebase from 'firebase/compat/app'\nimport 'firebase/compat/auth' // for authentication\nimport 'firebase/compat/firestore' // for db\n\nconst config = {\n  apiKey: 'AIzaSyChDIwn8oTBoWxj78QV0m4SQjVq_FlUx6o',\n  authDomain: 'crwn-clothing-db-f8235.firebaseapp.com',\n  projectId: 'crwn-clothing-db-f8235',\n  storageBucket: 'crwn-clothing-db-f8235.appspot.com',\n  messagingSenderId: '590473202452',\n  appId: '1:590473202452:web:fb3ac727774acf9b149001',\n  measurementId: 'G-ZN2CE5E2E7',\n}\n\n////////////////////////////////////////////\nfirebase.initializeApp(config)\n////////////////////////////////////////////\n\n// Save data to FireBase DB\nexport const createUserProfileDocument = async (userAuth, additionalData) => {\n  if (!userAuth) return\n\n  const userRef = firestore.doc(`persona/${userAuth.uid}`)\n\n  const snapShot = await userRef.get()\n\n  if (!snapShot.exists) {\n    const { displayName, email } = userAuth\n    const createdAt = new Date()\n\n    try {\n      await userRef.set({\n        displayName,\n        email,\n        createdAt,\n        ...additionalData,\n      })\n    } catch (err) {\n      console.log('error creating user')\n    }\n  }\n\n  return userRef\n}\n\n/**\n * SIGN IN WITH GOOGLE\n */\nexport const auth = firebase.auth()\nexport const firestore = firebase.firestore()\n\nexport const provider = new firebase.auth.GoogleAuthProvider()\nprovider.setCustomParameters({ prompt: 'select_account' })\nexport const signInWithGoogle = () => auth.signInWithPopup(provider)\n\nexport default firebase\n"],"mappings":"4VAAA,MAAOA,SAAP,KAAqB,qBAArB,CACA,MAAO,sBAAP,CAA8B;AAC9B,MAAO,2BAAP,CAAmC;AAEnC,GAAMC,OAAM,CAAG,CACbC,MAAM,CAAE,yCADK,CAEbC,UAAU,CAAE,wCAFC,CAGbC,SAAS,CAAE,wBAHE,CAIbC,aAAa,CAAE,oCAJF,CAKbC,iBAAiB,CAAE,cALN,CAMbC,KAAK,CAAE,2CANM,CAObC,aAAa,CAAE,cAPF,CAAf,CAUA;AACAR,QAAQ,CAACS,aAAT,CAAuBR,MAAvB,EACA;AAEA;AACA,MAAO,IAAMS,0BAAyB,4FAAG,iBAAOC,QAAP,CAAiBC,cAAjB,wKAClCD,QADkC,iEAGjCE,OAHiC,CAGvBC,SAAS,CAACC,GAAV,mBAAyBJ,QAAQ,CAACK,GAAlC,EAHuB,uBAKhBH,QAAO,CAACI,GAAR,EALgB,QAKjCC,QALiC,kBAOlCA,QAAQ,CAACC,MAPyB,0BAQ7BC,WAR6B,CAQNT,QARM,CAQ7BS,WAR6B,CAQhBC,KARgB,CAQNV,QARM,CAQhBU,KARgB,CAS/BC,SAT+B,CASnB,GAAIC,KAAJ,EATmB,wCAY7BV,QAAO,CAACW,GAAR,gBACJJ,WAAW,CAAXA,WADI,CAEJC,KAAK,CAALA,KAFI,CAGJC,SAAS,CAATA,SAHI,EAIDV,cAJC,EAZ6B,0FAmBnCa,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAnBmC,wCAuBhCb,OAvBgC,uEAAH,kBAAzBH,0BAAyB,gDAA/B,CA0BP;AACA;AACA,GACA,MAAO,IAAMiB,KAAI,CAAG3B,QAAQ,CAAC2B,IAAT,EAAb,CACP,MAAO,IAAMb,UAAS,CAAGd,QAAQ,CAACc,SAAT,EAAlB,CAEP,MAAO,IAAMc,SAAQ,CAAG,GAAI5B,SAAQ,CAAC2B,IAAT,CAAcE,kBAAlB,EAAjB,CACPD,QAAQ,CAACE,mBAAT,CAA6B,CAAEC,MAAM,CAAE,gBAAV,CAA7B,EACA,MAAO,IAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,SAAML,KAAI,CAACM,eAAL,CAAqBL,QAArB,CAAN,EAAzB,CAEP,cAAe5B,SAAf"},"metadata":{},"sourceType":"module"}